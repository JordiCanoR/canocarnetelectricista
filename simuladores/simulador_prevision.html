
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Simulador Previsión de Cargas</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        table { border-collapse: collapse; width: 100%; margin-bottom: 30px; }
        th, td { border: 1px solid #004080; padding: 6px; text-align: center; }
        input[type='number'], input[type='text'] { width: 95%; padding: 4px; }
        h2 { background-color: #e0e0e0; padding: 5px; }
        .boton { padding: 10px 20px; font-size: 16px; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>PLANTILLA DE CÁLCULO DE CARGAS ELÉCTRICAS - REBT (Guía BT-10)</h1>

    <h2>4. LOCALES COMERCIALES</h2>
    <table id="tabla_comercio">
        <tr><th>Nº</th><th>Superficie (m²)</th><th>Potencia prevista (W)</th></tr>
        <tr><td>1</td><td><input type="number"></td><td><input class="com_pot" type="number"></td></tr>
        <tr><td>2</td><td><input type="number"></td><td><input class="com_pot" type="number"></td></tr>
    </table>
    <button class="boton" onclick="agregarFila('tabla_comercio', 'com_pot')">Añadir local comercial</button><br>
    <label>Total locales comerciales (W): <input type="text" id="res_com" readonly></label>

    <h2>5. OFICINAS</h2>
    <table id="tabla_oficinas">
        <tr><th>Nº</th><th>Superficie (m²)</th><th>Potencia prevista (W)</th></tr>
        <tr><td>1</td><td><input type="number"></td><td><input class="ofi_pot" type="number"></td></tr>
        <tr><td>2</td><td><input type="number"></td><td><input class="ofi_pot" type="number"></td></tr>
    </table>
    <button class="boton" onclick="agregarFila('tabla_oficinas', 'ofi_pot')">Añadir oficina</button><br>
    <label>Total oficinas (W): <input type="text" id="res_ofi" readonly></label>

    <script>
        function agregarFila(tablaId, clase) {
            const tabla = document.getElementById(tablaId);
            const rowCount = tabla.rows.length;
            const row = tabla.insertRow();
            const celdaNum = row.insertCell(0);
            const celdaSup = row.insertCell(1);
            const celdaPot = row.insertCell(2);
            celdaNum.textContent = rowCount;
            celdaSup.innerHTML = "<input type='number'>";
            celdaPot.innerHTML = "<input type='number' class='" + clase + "'>";
        }

        function calcularOficinasLocales() {
            let total_com = 0;
            document.querySelectorAll(".com_pot").forEach(e => {
                total_com += parseFloat(e.value) || 0;
            });
            let total_ofi = 0;
            document.querySelectorAll(".ofi_pot").forEach(e => {
                total_ofi += parseFloat(e.value) || 0;
            });

            document.getElementById('res_com').value = total_com.toFixed(2);
            document.getElementById('res_ofi').value = total_ofi.toFixed(2);
        }

        window.addEventListener("input", calcularOficinasLocales);
    </script>
</body>
</html>
