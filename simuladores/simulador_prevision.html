
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Simulador Previsión de Cargas</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
        th, td { border: 1px solid #004080; padding: 6px; text-align: center; }
        input[type='number'], input[type='text'] { width: 90%; }
        .section { margin-top: 30px; }
        label { display: inline-block; width: 300px; margin-bottom: 8px; }
    </style>
</head>
<body>
    <header>
        <h1>Simulador Previsión de Cargas</h1>
        <nav>
            <ul>
                <li><a href="../index.html">Inicio</a></li>
                <li><a href="simulador_lga.html">Simulación LGA</a></li>
                <li><a href="simulador_di.html">Simulación Derivación Individual</a></li>
                <li><a href="simulador_prevision.html">Simulación Previsión Cargas</a></li>
                <li><a href="../test/index.html">Test</a></li>
                <li><a href="../plantillas/index.html">Plantillas</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <h2>1. Viviendas</h2>
        <table id="tabla_viviendas">
            <tr><th>Nº</th><th>Superficie (m²)</th><th>Electrificación</th><th>Potencia prevista (W)</th></tr>
            <tr><td>1</td><td><input id="sup1"></td><td><input id="tipo1"></td><td><input id="pot1" type="number"></td></tr>
            <tr><td>2</td><td><input id="sup2"></td><td><input id="tipo2"></td><td><input id="pot2" type="number"></td></tr>
        </table>
        <label>Nº total viviendas:</label> <input id="total_viv" type="number" value="2"><br>
        <label>Coef. simultaneidad:</label> <input id="coef_sim" type="number" step="any"><br>
        <label>Media potencias previstas (W):</label> <input id="media" readonly><br>
        <label>Total potencia viviendas (W):</label> <input id="pot_viv" readonly><br>

        <div class="section">
            <h2>2. Servicios Generales</h2>
            <label>Ascensor 1 (W):</label> <input id="asc1" type="number"><br>
            <label>Ascensor 2 (W):</label> <input id="asc2" type="number"><br>
            <label>Alumbrado fluo (1.8 × puntos × W × 0.9):</label> <input id="alumbf" type="number"><br>
            <label>Alumbrado incan. (puntos × W):</label> <input id="alumbi" type="number"><br>
            <label>Puertas automáticas (W):</label> <input id="puertas" type="number"><br>
            <label>Grupo presión 1 (CV):</label> <input id="gp1" type="number"><br>
            <label>Grupo presión 2 (CV):</label> <input id="gp2" type="number"><br>
            <label>Otros (W):</label> <input id="otros" type="number"><br>
            <label>Total servicios generales (W):</label> <input id="total_servicios" readonly><br>
        </div>

        <div class="section">
            <h2>3. Garajes</h2>
            <label>Nº plazas:</label> <input id="plazas" type="number"><br>
            <label>Ventilación (natural=10W, forzada=20W):</label> <input id="ventilacion" type="number"><br>
            <label>Puntos de recarga VE:</label> <input id="puntos_ve" type="number"><br>
            <label>¿Con SPL? (1=sí, 0=no):</label> <input id="spl" type="number"><br>
            <label>Total garajes (W):</label> <input id="pot_garaje" readonly><br>
        </div>

        <div class="section">
            <h2>Resultado Final</h2>
            <label>Potencia total prevista edificio (W):</label> <input id="total_edificio" readonly><br>
        </div>

        <button onclick="calcular()">Calcular Todo</button>
    </main>

    <script>
        function calcular() {
            let pot1 = parseFloat(document.getElementById('pot1').value) || 0;
            let pot2 = parseFloat(document.getElementById('pot2').value) || 0;
            let media = (pot1 + pot2) / 2;
            document.getElementById('media').value = media.toFixed(2);

            let coef = parseFloat(document.getElementById('coef_sim').value) || 1;
            let totalViv = media * coef;
            document.getElementById('pot_viv').value = totalViv.toFixed(2);

            let asc1 = parseFloat(document.getElementById('asc1').value) || 0;
            let asc2 = parseFloat(document.getElementById('asc2').value) || 0;
            let alumbf = parseFloat(document.getElementById('alumbf').value) || 0;
            let alumbi = parseFloat(document.getElementById('alumbi').value) || 0;
            let puertas = parseFloat(document.getElementById('puertas').value) || 0;
            let gp1 = parseFloat(document.getElementById('gp1').value) || 0;
            let gp2 = parseFloat(document.getElementById('gp2').value) || 0;
            let otros = parseFloat(document.getElementById('otros').value) || 0;

            let servicios = (asc1 + asc2) * 1.3 + alumbf + alumbi + puertas + (gp1 * 736) + (gp2 * 736) + otros;
            document.getElementById('total_servicios').value = servicios.toFixed(2);

            let plazas = parseInt(document.getElementById('plazas').value) || 0;
            let vent = parseInt(document.getElementById('ventilacion').value) || 10;
            let puntos_ve = parseInt(document.getElementById('puntos_ve').value) || 0;
            let spl = parseInt(document.getElementById('spl').value) || 0;
            let potVE = puntos_ve * 3680 * (spl ? 0.3 : 1);
            let pot_garaje = plazas * vent + potVE;
            document.getElementById('pot_garaje').value = pot_garaje.toFixed(2);

            let total = totalViv + servicios + pot_garaje;
            document.getElementById('total_edificio').value = total.toFixed(2);
        }
    </script>
</body>
</html>
