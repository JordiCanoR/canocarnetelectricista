
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Test Carnet Instalador</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        body {{ font-family: Arial, sans-serif; margin: 20px; }}
        .pregunta {{ margin-bottom: 20px; }}
        #resultado {{ font-weight: bold; margin-top: 20px; }}
        #temporizador {
            position: fixed;
            top: 10px;
            right: 10px;
            background-color: #007BFF;
            color: white;
            font-size: 18px;
            font-weight: bold;
            padding: 10px 15px;
            border-radius: 10px;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
        }
    </style>
</head>
<body>
    <h1>Test Oficial - Carnet Instalador Baja Tensión</h1>
    <div id="temporizador">Tiempo restante: <span id="tiempo">35:00</span></div>
    <form id="testForm">
        <!-- Generar 30 preguntas con 3 opciones -->
        {}
        <button type="submit">Enviar test</button>
    </form>
    <div id="resultado"></div>

    <script>
        // Temporizador
        let tiempo = 35 * 60;
        const tiempoSpan = document.getElementById("tiempo");
        const temporizador = setInterval(() => {{
            let minutos = Math.floor(tiempo / 60);
            let segundos = tiempo % 60;
            tiempoSpan.textContent = `${{minutos.toString().padStart(2, '0')}}:${{segundos.toString().padStart(2, '0')}}`;
            if (tiempo <= 0) {{
                clearInterval(temporizador);
                document.getElementById("testForm").submit();
            }}
            tiempo--;
        }}, 1000);

        // Respuestas correctas (solo ejemplo, deben ajustarse)
        const respuestasCorrectas = [
            "a","b","c","a","b","c","a","b","c","a",
            "b","c","a","b","c","a","b","c","a","b",
            "c","a","b","c","a","b","c","a","b","c"
        ];

        document.getElementById("testForm").addEventListener("submit", function(e) {{
            e.preventDefault();
            let correctas = 0;
            for (let i = 1; i <= 30; i++) {{
                const respuesta = document.querySelector(`input[name="q${{i}}"]:checked`);
                if (respuesta && respuesta.value === respuestasCorrectas[i - 1]) {{
                    correctas++;
                }}
            }}
            const resultado = `Has acertado ${{correctas}} de 30 preguntas. Puntuación: ${{(correctas / 30 * 100).toFixed(2)}}%`;
            document.getElementById("resultado").textContent = resultado;
        }});
    </script>
</body>
</html>
"""

# Generamos 30 preguntas de ejemplo
preguntas_html = ""
for i in range(1, 31):
    preguntas_html += f"""
    <div class="pregunta">
        <p><strong>{i}. Pregunta de ejemplo {i}</strong></p>
        <label><input type="radio" name="q{i}" value="a"> Opción A</label><br>
        <label><input type="radio" name="q{i}" value="b"> Opción B</label><br>
        <label><input type="radio" name="q{i}" value="c"> Opción C</label>
    </div>
    """

# Insertamos las preguntas en el HTML
final_html = html_content.format(preguntas_html)

# Guardamos el archivo HTML
output_path = Path("/mnt/data/index_test.html")
output_path.write_text(final_html, encoding="utf-8")

output_path
